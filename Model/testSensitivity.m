syms Vx s Cf Cr Jz lf lr m k

Reg = (35.708*s^2 + 4.4885*s + 0.140975)/(s^3 + 197.07*s^2 + 2319.17*s);
% RegTF = tf([35.708 4.4885 0.140975], [1 197.07 2319.17 0]);

Ns = Cf*Vx*(lf*m*Vx^2 + Jz*k*Vx)*s^2 + Cf*Vx*(Cr*Vx*lr + Cr*lf*Vx + Cr*k*lr^2 + Cr*k*lf*lr)*s + Cf*Vx*(Cr*k*Vx*lr + Cr*k*lf*Vx);
D1s = k*s^2;
D2s = Jz*Vx^2*m*s^2 + (Cf*Jz*Vx + Cr*Jz*Vx + Cf*Vx*lf^2*m + Cr*Vx*lr^2*m)*s + Cf*Cr*lf^2 + Cf*Cr*lr^2 - Cf*Vx^2*lf*m + Cr*Vx^2*lr*m + 2*Cf*Cr*lf*lr;
Gs = Ns / (D1s * D2s);


Ss = (1 + Reg*Gs)^-1;
Fs = (Reg*Gs) / (1 + Reg*Gs);

%%
m = 590+70+58;
Cf = 100000;
Cr = 100000;
Jz = 606;
lf = 1.767;
lr = 1.353;
k = 3;
Vx = 45;
%%

S = subs(Ss);
S = simplify(S);

%%

STF = tf([36328978811631697920000 8044052449537058616115200 260132800587942364736996556 2353638277082494868048509050 3552450141076150232063250000 0 0 0], [36328978811631697920000 8044052449537058616115200 260132800587942362093715456 8208110103162615536063348736 38091818715389265012699693056 97292192639548202249749528576 11826078841192764376350720000 367242401851165900800000000001]);

%%

F = subs(Fs);
F = simplify(F);

%%

FTF = tf([108416144927409643192320000 639617936561353984573440000 1801707271102744561188864000 219001460022088229191680000 6800785219466035200000000],[672758866882068480000 148963934250686270668800 4817274084961895643277714 152002038947455844452477575 705404050284986396278315000 1801707271102744561188864000 219001460022088229191680000 6800785219466035200000000]);




